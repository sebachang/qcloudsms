(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-559f0898"],{"0d8d":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("el-form",{ref:"form",attrs:{model:t.form,"label-width":"180px"}},[i("el-tabs",{on:{"tab-click":t.handleTab},model:{value:t.currModule,callback:function(e){t.currModule=e},expression:"currModule"}},t._l(t.form.module_list,function(t,e){return i("el-tab-pane",{key:e,attrs:{label:t.name,name:t.name}})}),1),t._v(" "),t._l(t.form.config_dict,function(e,n,o){return t.currModule==e.module.name?i("el-form-item",{key:o,attrs:{label:e.key_desc}},[i("el-input",{ref:"inputs",refInFor:!0,staticStyle:{width:"500px"},attrs:{"data-key":n},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"item.value"}}),t._v(" "),i("div",{staticClass:"tipBox",staticStyle:{width:"500px"},domProps:{textContent:t._s(e.value_desc)}})],1):t._e()}),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("提交")]),t._v(" "),i("el-button",{on:{click:t.onCancel}},[t._v("取消")])],1)],2)],1)},o=[],c=(i("7f7f"),i("6b54"),i("cebc")),r=i("2f62"),f=(i("96cf"),i("3b8d")),a=i("d0f7");function s(t){return u.apply(this,arguments)}function u(){return u=Object(f["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(a["a"])({url:"./system_config/setting_generic/get_list/",method:"get",params:{biz_id:e}}));case 1:case"end":return t.stop()}},t)})),u.apply(this,arguments)}function l(t,e){return Object(a["a"])({url:"/system_config/setting/",method:"post",params:{biz_id:t},data:e})}function d(t,e,i){return Object(a["a"])({url:"/system_config/setting/"+t+"/",method:"put",params:{biz_id:i},data:e})}var m={data:function(){return{form:{module_list:[],module_dict:{},config_dict:{},config_db:{}},currModule:""}},computed:Object(c["a"])({},Object(r["b"])(["currBiz"])),created:function(){this.reloadAllInfo()},methods:{reloadAllInfo:function(){var t=this;this.form.module_list=[],this.form.config_dict={},this.form.config_db={},s(this.currBiz).then(function(e){t.form.config_db=e.config_db;var i={};for(var n in e.config_dict){i[e.config_dict[n].module.index]=e.config_dict[n].module;var o=e.config_dict[n].module.index.toString()+e.config_dict[n].cfg_index.toString();t.$set(t.form.config_dict,o,e.config_dict[n]),t.$set(t.form.config_dict[o],"key",n),e.config_db.hasOwnProperty(n)?(t.$set(t.form.config_dict[o],"old_value",e.config_db[n]),t.$set(t.form.config_dict[o],"value",e.config_db[n]),t.$set(t.form.config_dict[o],"presence","1")):(t.$set(t.form.config_dict[o],"old_value",""),t.$set(t.form.config_dict[o],"value",e.config_dict[n].default),t.$set(t.form.config_dict[o],"presence","0"))}for(var c in i)0===t.form.module_list.length&&(t.currModule=i[c].name),t.form.module_list.push(i[c])})},handleTab:function(t){this.currModule=t.name},onSubmit:function(){for(var t=this,e=this.$refs.inputs,i=function(i){var n=e[i].$attrs["data-key"],o={biz_id:t.currBiz,config_key:t.form.config_dict[n].key,config_value:t.form.config_dict[n].value};if(t.form.config_dict[n].value===t.form.config_dict[n].old_value)return"continue";"1"===t.form.config_dict[n].presence?d(t.form.config_dict[n].key,o,t.currBiz).then(function(){t.$message({message:"更新成功",type:"success"}),t.$set(t.form.config_dict[n],"old_value",t.form.config_dict[n].value)}):"0"===t.form.config_dict[n].presence&&(console.log(o),l(t.currBiz,o).then(function(){t.$set(t.form.config_dict[n],"presence","1"),t.$set(t.form.config_dict[n],"old_value",t.form.config_dict[n].value),t.$message({message:"添加成功",type:"success"})}))},n=0;n<e.length;n++)i(n)},onCancel:function(){for(var t=this.$refs.inputs,e=0;e<t.length;e++){var i=t[e].$attrs["data-key"];this.$set(this.form.config_dict[i],"value",this.form.config_dict[i].old_value)}this.$message({message:"重置配置",type:"success"})}}},_=m,g=(i("f4a9"),i("2877")),p=Object(g["a"])(_,n,o,!1,null,"77295bde",null);e["default"]=p.exports},"20a8":function(t,e,i){},f4a9:function(t,e,i){"use strict";var n=i("20a8"),o=i.n(n);o.a}}]);